<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"

        xmlns:c="clr-namespace:Ameko.Views.Controls"
        xmlns:converters="clr-namespace:Ameko.Converters"
        xmlns:i18n="clr-namespace:Ameko.I18N"
        xmlns:vm="clr-namespace:Ameko.ViewModels.Dialogs"

        x:Class="Ameko.Views.Dialogs.ConfigDialog"
        x:DataType="vm:ConfigDialogViewModel"

        Width="480"
        Topmost="True"
        CanResize="False"
        SizeToContent="WidthAndHeight"
        WindowStartupLocation="CenterOwner"
        Icon="/Assets/Ameko-Simplified-BG-64.ico"
        Title="{x:Static i18n:Config.ConfigDialog_Title}">
    <Window.Resources>
        <converters:HccBorderConverter x:Key="BorderConverter" />
    </Window.Resources>
    <StackPanel Margin="2">
        <!-- Substation Alpha -->
        <HeaderedContentControl Header="{x:Static i18n:Config.Config_Header_Ssa}">
            <Grid ColumnDefinitions="Auto, Auto"
                  RowDefinitions="Auto, Auto, Auto, Auto, Auto, Auto, Auto, Auto"
                  ColumnSpacing="10"
                  RowSpacing="2">
                <Label Grid.Column="0"
                       Grid.Row="0"
                       VerticalAlignment="Center"
                       Content="{x:Static i18n:Config.Config_Label_CpsWarnThreshold}" />
                <c:NumberTextBox Grid.Column="1"
                                 Grid.Row="0"
                                 Width="50"
                                 Minimum="0"
                                 Maximum="100"
                                 Increment="1"
                                 FormatString="0"
                                 HorizontalAlignment="Left"
                                 Value="{Binding Config.Cps}" />
                <Label Grid.Column="0"
                       Grid.Row="1"
                       VerticalAlignment="Center"
                       Content="{x:Static i18n:Config.Config_Label_CpsWhitespace}" />
                <CheckBox Grid.Column="1"
                          Grid.Row="1"
                          IsChecked="{Binding Config.CpsIncludesWhitespace}" />
                <Label Grid.Column="0"
                       Grid.Row="2"
                       VerticalAlignment="Center"
                       Content="{x:Static i18n:Config.Config_Label_CpsPunctuation}" />
                <CheckBox Grid.Column="1"
                          Grid.Row="2"
                          IsChecked="{Binding Config.CpsIncludesPunctuation}" />
                <Label Grid.Column="0"
                       Grid.Row="3"
                       VerticalAlignment="Center"
                       Content="{x:Static i18n:Config.Config_Label_SoftLinebreaks}"
                       ToolTip.Tip="{x:Static i18n:Config.Config_Label_SoftLinebreaks_ToolTip}" />
                <CheckBox Grid.Column="1"
                          Grid.Row="3"
                          IsChecked="{Binding Config.CpsIncludesWhitespace}" />
                <Label Grid.Column="0"
                       Grid.Row="4"
                       VerticalAlignment="Center"
                       Content="{x:Static i18n:Config.Config_Label_LineWidthWhitespace}" />
                <CheckBox Grid.Column="1"
                          Grid.Row="4"
                          IsChecked="{Binding Config.LineWidthIncludesWhitespace}" />
                <Label Grid.Column="0"
                       Grid.Row="5"
                       VerticalAlignment="Center"
                       Content="{x:Static i18n:Config.Config_Label_LineWidthPunctuation}" />
                <CheckBox Grid.Column="1"
                          Grid.Row="5"
                          IsChecked="{Binding Config.LineWidthIncludesPunctuation}" />
                <Label Grid.Column="0"
                       Grid.Row="6"
                       VerticalAlignment="Center"
                       Content="{x:Static i18n:Config.Config_Label_DefaultLayer}" />
                <c:NumberTextBox Grid.Column="1"
                                 Grid.Row="6"
                                 Width="50"
                                 Minimum="0"
                                 Maximum="999"
                                 Increment="1"
                                 FormatString="0"
                                 HorizontalAlignment="Left"
                                 Value="{Binding Config.DefaultLayer}" />
            </Grid>
        </HeaderedContentControl>
        
        <!-- Ameko Behavior -->
        <HeaderedContentControl Header="{x:Static i18n:Config.Config_Header_Behavior}">
            <Grid ColumnDefinitions="Auto, Auto, Auto"
                  RowDefinitions="Auto, Auto, Auto, Auto, Auto, Auto, Auto, Auto, Auto"
                  ColumnSpacing="10"
                  RowSpacing="2">
                <Label Grid.Column="0"
                       Grid.Row="0"
                       VerticalAlignment="Center"
                       Content="{x:Static i18n:Config.Config_Label_DisplayLanguage}" />
                <ComboBox Grid.Column="1"
                          Grid.Row="0"
                          Width="175"
                          ItemsSource="{Binding CultureService.AvailableLanguages}"
                          SelectedValue="{Binding Config.Culture}"
                          DisplayMemberBinding="{Binding Name}"
                          SelectedValueBinding="{Binding Locale}" />
                <Label Grid.Column="2"
                       Grid.Row="0"
                       VerticalAlignment="Center"
                       Foreground="Red"
                       Content="{x:Static i18n:Config.Config_Label_RestartRequired}" />
                <Label Grid.Column="0"
                       Grid.Row="1"
                       VerticalAlignment="Center"
                       Content="{x:Static i18n:Config.Config_Label_SpellcheckLanguage}" />
                <ComboBox Grid.Column="1"
                          Grid.Row="1"
                          Width="175"
                          ItemsSource="{Binding DictionaryService.InstalledDictionaries}"
                          SelectedValue="{Binding Config.SpellcheckCulture}"
                          DisplayMemberBinding="{Binding Lang.Name}"
                          SelectedValueBinding="{Binding Lang.Locale}" />
                <Label Grid.Column="0"
                       Grid.Row="2"
                       VerticalAlignment="Center"
                       Content="{x:Static i18n:Config.Config_Label_RichPresence}" />
                <ComboBox Grid.Column="1"
                          Grid.Row="2"
                          Width="175"
                          ItemsSource="{Binding RichPresenceLevelChoices}"
                          SelectedValue="{Binding Config.RichPresenceLevel}"
                          DisplayMemberBinding="{Binding Item2}"
                          SelectedValueBinding="{Binding Item1}" />
                <Label Grid.Column="0"
                       Grid.Row="3"
                       VerticalAlignment="Center"
                       Content="{x:Static i18n:Config.Config_Label_PropagateChanges}"
                       ToolTip.Tip="{x:Static i18n:Config.Config_Label_PropagateChanges_ToolTip}" />
                <ComboBox Grid.Column="1"
                          Grid.Row="3"
                          Width="175"
                          ItemsSource="{Binding PropagateFieldsChoices}"
                          SelectedValue="{Binding Config.PropagateFields}"
                          DisplayMemberBinding="{Binding Item2}"
                          SelectedValueBinding="{Binding Item1}" />
                <Label Grid.Column="0"
                       Grid.Row="4"
                       VerticalAlignment="Center"
                       Content="{x:Static i18n:Config.Config_Label_SaveFrames}" />
                <ComboBox Grid.Column="1"
                          Grid.Row="4"
                          Width="175"
                          ItemsSource="{Binding SaveFramesChoices}"
                          SelectedValue="{Binding Config.SaveFrames}"
                          DisplayMemberBinding="{Binding Item2}"
                          SelectedValueBinding="{Binding Item1}" />
                <Label Grid.Column="0"
                       Grid.Row="5"
                       VerticalAlignment="Center"
                       Content="{x:Static i18n:Config.Config_Label_AutosaveEnabled}" />
                <CheckBox Grid.Column="1"
                          Grid.Row="5"
                          IsChecked="{Binding Config.AutosaveEnabled}" />
                <Label Grid.Column="0"
                       Grid.Row="6"
                       VerticalAlignment="Center"
                       Content="{x:Static i18n:Config.Config_Label_AutosaveInterval}" />
                <c:NumberTextBox Grid.Column="1"
                                 Grid.Row="6"
                                 Width="50"
                                 Minimum="30"
                                 Maximum="1800"
                                 Increment="1"
                                 FormatString="0"
                                 HorizontalAlignment="Left"
                                 Value="{Binding Config.AutosaveInterval}" />
                <Label Grid.Column="0"
                       Grid.Row="7"
                       VerticalAlignment="Center"
                       Content="{x:Static i18n:Config.Config_Label_IndexCacheExpiration}" />
                <c:NumberTextBox Grid.Column="1"
                                 Grid.Row="7"
                                 Width="50"
                                 Minimum="1"
                                 Maximum="128"
                                 Increment="1"
                                 FormatString="0"
                                 HorizontalAlignment="Left"
                                 Value="{Binding Config.IndexCacheExpiration}" />
                <Label Grid.Column="0"
                       Grid.Row="8"
                       VerticalAlignment="Center"
                       Content="{x:Static i18n:Config.Config_Label_AutoloadAudioTracks}"
                       ToolTip.Tip="{x:Static i18n:Config.Config_Label_AutoloadAudioTracks_ToolTip}" />
                <CheckBox Grid.Column="1"
                          Grid.Row="8"
                          IsChecked="{Binding Config.AutoloadAudioTracks}" />
            </Grid>
        </HeaderedContentControl>
        
        <!-- Ameko Appearance -->
        <HeaderedContentControl Header="{x:Static i18n:Config.Config_Header_Appearance}">
            <Grid ColumnDefinitions="Auto, Auto"
                  RowDefinitions="Auto, Auto, Auto, Auto, Auto"
                  ColumnSpacing="10"
                  RowSpacing="2">
                <Label Grid.Column="0"
                       Grid.Row="0"
                       VerticalAlignment="Center"
                       Content="{x:Static i18n:Config.Config_Label_Theme}" />
                <ComboBox Grid.Column="1"
                          Grid.Row="0"
                          Width="175"
                          ItemsSource="{Binding ThemeChoices}"
                          SelectedValue="{Binding Config.Theme}"
                          DisplayMemberBinding="{Binding Item2}"
                          SelectedValueBinding="{Binding Item1}" />
                <Label Grid.Column="0"
                       Grid.Row="1"
                       VerticalAlignment="Center"
                       Content="{x:Static i18n:Config.Config_Label_EditorFs}" />
                <c:NumberTextBox Grid.Column="1"
                                 Grid.Row="1"
                                 Width="50"
                                 Minimum="8"
                                 Maximum="100"
                                 Increment="0.5"
                                 FormatString="0.0"
                                 HorizontalAlignment="Left"
                                 Value="{Binding Config.EditorFontSize}" />
                <Label Grid.Column="0"
                       Grid.Row="2"
                       VerticalAlignment="Center"
                       Content="{x:Static i18n:Config.Config_Label_GridFs}" />
                <c:NumberTextBox Grid.Column="1"
                                 Grid.Row="2"
                                 Width="50"
                                 Minimum="8"
                                 Maximum="100"
                                 Increment="0.5"
                                 FormatString="0.0"
                                 HorizontalAlignment="Left"
                                 Value="{Binding Config.GridFontSize}" />
                <Label Grid.Column="0"
                       Grid.Row="3"
                       VerticalAlignment="Center"
                       Content="{x:Static i18n:Config.Config_Label_ReferenceFs}" />
                <c:NumberTextBox Grid.Column="1"
                                 Grid.Row="3"
                                 Width="50"
                                 Minimum="8"
                                 Maximum="100"
                                 Increment="0.5"
                                 FormatString="0.0"
                                 HorizontalAlignment="Left"
                                 Value="{Binding Config.ReferenceFontSize}" />
                <Label Grid.Column="0"
                       Grid.Row="4"
                       VerticalAlignment="Center"
                       Content="{x:Static i18n:Config.Config_Label_GridPadding}" />
                <c:NumberTextBox Grid.Column="1"
                                 Grid.Row="4"
                                 Width="50"
                                 Minimum="0"
                                 Maximum="10"
                                 Increment="1"
                                 FormatString="0"
                                 HorizontalAlignment="Left"
                                 Value="{Binding Config.GridPadding}" />
            </Grid>
        </HeaderedContentControl>
    </StackPanel>
    <Window.Styles>
        <Style Selector="HeaderedContentControl">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate>
                        <Border>
                            <StackPanel>
                                <ContentPresenter FontWeight="Bold"
                                                  Margin="0 10 0 2"
                                                  Content="{TemplateBinding Header}" />
                                <Border BorderBrush="{TemplateBinding Foreground, Converter={StaticResource BorderConverter}}"
                                        BorderThickness="2"
                                        CornerRadius="5">
                                    <ContentPresenter Content="{TemplateBinding Content}"
                                                      Padding="5" />
                                </Border>
                            </StackPanel>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Styles>
</Window>
